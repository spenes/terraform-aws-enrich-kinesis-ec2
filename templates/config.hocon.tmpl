# Config Hash: ${config_hash}
{
  "input": {
    "type": "Kinesis"
    "appName": "${app_name}"
    "streamName": "${in_stream_name}"
    "region": "${region}"
    "initialPosition": {
      "type": "${initial_position}"
    }
  }
  "output": {
    "good": {
      "type": "Kinesis"
      "streamName": "${enriched_stream_name}"
      "region": "${region}"
      "maxBufferedTime": ${time_limit_ms} millis
      "collection": {
        "maxCount": ${record_limit}
        "maxSize": ${byte_limit}
      }
    }
    "bad": {
      "type": "Kinesis"
      "streamName": "${bad_stream_name}"
      "region": "${region}"
      "maxBufferedTime": ${time_limit_ms} millis
      "collection": {
        "maxCount": ${record_limit}
        "maxSize": ${byte_limit}
      }
    }
     %{ if incomplete_stream_name != ""}
    "incomplete": {
      "type": "Kinesis"
      "streamName": "${incomplete_stream_name}"
      "region": "${region}"
      "maxBufferedTime": ${time_limit_ms} millis
      "collection": {
        "maxCount": ${record_limit}
        "maxSize": ${byte_limit}
      }
    }
    %{ endif}
    %{ if pii_stream_name != ""}
    "pii": {
      "type": "Kinesis"
      "streamName": "${pii_stream_name}"
      "region": "${region}"
      "maxBufferedTime": ${time_limit_ms} millis
      "collection": {
        "maxCount": ${record_limit}
        "maxSize": ${byte_limit}
      }
    }
    %{ endif}
  }

  "assetsUpdatePeriod": "${assets_update_period}"

  "monitoring": {
    "metrics": {
      "stdout": {
        "period": "60 seconds"
      }
      "cloudwatch": false
    }
  }

  "telemetry": {
    "disable": ${telemetry_disable}
    "interval": 15 minutes
    "method": "POST"
    "collectorUri": "${telemetry_collector_uri}"
    "collectorPort": ${telemetry_collector_port}
    "secure": ${telemetry_secure}
    "userProvidedId": "${telemetry_user_provided_id}"
    "autoGeneratedId": "${telemetry_auto_gen_id}"
    "moduleName": "${telemetry_module_name}"
    "moduleVersion": "${telemetry_module_version}"
    "instanceId": $${INSTANCE_ID}
  }

  "featureFlags" : {
    "acceptInvalid": false
  }
}
